# Valkey Server Configuration
# Custom build with valkey-search coordinator enabled

# Network
port 6379
bind 0.0.0.0
protected-mode yes

# General
daemonize no
pidfile /var/run/valkey_6379.pid
loglevel notice

# Persistence
save 900 1
save 300 10
save 60 10000
dbfilename dump.rdb
dir /data

# AOF
appendonly yes
appendfilename "appendonly.aof"

# Load Valkey Search module with configuration
# Module configs must be passed as arguments to loadmodule
loadmodule /usr/lib/valkey/libsearch.so --use-coordinator yes --reader-threads 8 --writer-threads 4 --hnsw-block-size 10000 --log-level notice

# Uncomment if you copied these modules in Dockerfile:
# loadmodule /usr/lib/valkey/libjson.so
# loadmodule /usr/lib/valkey/libvalkey_bloom.so
